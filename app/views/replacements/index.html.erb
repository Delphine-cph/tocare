<div class="marge-page">
<h4 class= "text-center"><strong><%= @replacements.count %> remplaçants sont disponibles </strong> </h4>


<div class="mt-3">
  <% @replacements.each do |user, replacements| %>
    <div class="" data-bs-toggle="modal" data-bs-target="#myModal<%= user.id %>">
    <div class="cards-remplacent mb-3">
    <div class="d-flex justify-content-around">
      <%= image_tag user.photo, class: "avatar" %>
      <h2 class="underline"> <%= user.first_name.capitalize %> <%= user.last_name.capitalize %> </h2>
    </div>
    <div class="patient-remplacement">
        <% replacements.each do |replacement| %>
        <ul style="list-style-type: '&#8213'">
        <li><p class="border-patient"> <%= replacement.patient.display_name %></p></li>
        </ul>
        <% end %>
        </div>
      </div>
    </div>

    <!-- Modal view user -->
    <div class="modal fade" id="myModal<%= user.id %>">
        <div class="modal-dialog mx-4">
          <div class="modal-content font-modal">
              <!-- Modal Header -->
              <div class="modal-header">
                <h4 class="modal-title ml-4"> <strong> <%= user.first_name.capitalize %> <%= user.last_name.capitalize %></strong> </h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <!-- Modal body -->
              <div class="modal-body">
              <%= image_tag user.photo, class: "avatar", style: "width: 100px; border:" %>
                <div class="card-user mt-3">
                  <ul class="ml-0"> <strong>Notation :</strong>
                    <% 5.times do %>
                      <li class="list-in-line"><i class="fas fa-star"></i></li>
                    <% end %>
                  </ul>
                </div>
                <p> <strong>Localisation:</strong> <%= user.arrondissement %></p>
                <p> <strong>Description:</strong> <%= user.description %></p>
              <!-- TODO IF MESSAGE PRIVE -->
                <% if Chatroom.find_chatroom(current_user, user) %>
                  <%= link_to "Message", chatroom_path(Chatroom.find_chatroom(current_user, user)), class: "btn btn-transm" %>
                <% else %>
                  <%= link_to "Message", chatrooms_path(id: user.id), method: :post, class: "btn btn-transm" %>
                <% end %>
              </div>
              <!-- Modal footer -->
          </div>
        </div>
    </div>

  <% end %>
</div>


<!-- Button trigger modal -->
<button type="button" class="btn-transmission" data-bs-toggle="modal" data-bs-target="#exampleModal">
  Je valide
</button>

<!-- Modal button valider -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Ta demande a bien été prise en compte</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p class= "p-text">Tu recevras une notification de validation de tes remplaçants </p>
      </div>
      <div class="modal-footer">
        <%= link_to "Faire une autre demande", new_replacement_path, class: "btn btn-primary btn-center my-3" %></div>
        <%= link_to "Retour à l'accueil", root_path, class: "btn btn-primary btn-center my-3" %>
      </div>
    </div>
  </div>
</div>
</div>
